---
import type { ProjectMetadata } from "../../lib/utils";

type Props = {
  project: ProjectMetadata;
};
const { project: p } = Astro.props;

function formatDate(date: Date) {
  const fullDate = date.toLocaleString("en-us", {
    month: "long",
    day: "numeric",
    year: "numeric",
  });

  return fullDate;
}
---

<header class="mb-8 flex flex-col gap-6">
  <section class="flex flex-col gap-4">
    <a
      href-lang="en-us"
      title="Back to projects"
      href="/projects"
      class="text-neutral-500 hover:text-neutral-600 dark:text-neutral-400 dark:hover:text-neutral-300"
    >
      <span class="sr-only">Back to projects</span>‚Üê Back
    </a>
    <header
      class="relative flex min-h-[200px] items-end justify-between overflow-hidden rounded-2xl md:min-h-[250px]"
      style={{
        backgroundColor: p.data.color ?? "transparent",
      }}
    >
      <div class="flex flex-col px-6 py-6">
        <span class="group flex gap-4 overflow-hidden">
          <a
            href={p.data.link ?? ""}
            href-lang="en-us"
            target="_blank"
            tab-index={p.data.link ? undefined : -1}
            class={p.data.link ? "" : "pointer-events-none"}
            aria-disabled={!p.data.link}
          >
            <h1
              title="Visit Project"
              class="balance z-10 w-fit max-w-[650px] animate-slide-in-bottom rounded-full p-2 font-semibold text-4xl text-neutral-900 tracking-tighter md:text-7xl"
              style={{
                backgroundColor: p.data.color ?? "transparent",
              }}
            >
              {p.data.title}
            </h1>
          </a>
        </span>
        <div
          class="z-10 flex w-fit flex-col gap-1 rounded-xl p-2 py-1 font-medium text-neutral-800 text-sm sm:font-normal md:text-lg dark:text-neutral-800"
          style={{
            backgroundColor: p.data.color ?? "transparent",
          }}
        >
          <span class="flex items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-down-left"
              ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
                d="M8 8v8h8"></path></svg
            >
            {formatDate(p.data.startedAt)}
          </span>
          <span class="flex items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-down-right"
              ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
                d="M16 8v8h-8"></path></svg
            >
            {p.data.endedAt ? formatDate(p.data.endedAt) : "In Progress"}
          </span>
        </div>
      </div>
      <img
        style={{
          mixBlendMode: "multiply",
        }}
        title={`Cover Image for the project ${p.data.title}`}
        class="-top-16 -right-60 md:-right-40 absolute opacity-50 md:opacity-100"
        src={`/media/projects/${p.id}/${p.data.cover}`}
        alt={p.data.title}
        width={500}
        height={500}
      />
    </header>
  </section>
  <nav class="flex w-full flex-wrap gap-4">
    {
      p.data.link ? (
        <a
          href={p.data.link}
          href-lang="en-us"
          title="Visit Project"
          class="flex h-full flex-1 animate-expand-vertically items-center justify-center gap-2 rounded-2xl px-3 py-2 text-secondary-900 text-xl transition-all hover:brightness-90 sm:justify-start"
          target="_blank"
          style={{
            backgroundColor: p.data.color ?? "transparent",
          }}
          rel="noopener noreferrer"
        >
          <span class="sr-only">Link to the project</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon icon-tabler icons-tabler-outline icon-tabler-search"
          >
            <>
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
              <path d="M21 21l-6 -6" />
            </>
          </svg>
          <span>Visit Project</span>
        </a>
      ) : null
    }
    {
      p.data.githubLink ? (
        <a
          title="Link to Github Source"
          href={p.data.githubLink}
          href-lang="en-us"
          class="flex h-full w-fit animate-expand-vertically items-center gap-2 truncate rounded-2xl px-3 py-2 text-black text-xl transition-all hover:brightness-90"
          target="_blank"
          style={{
            backgroundColor: p.data.color ?? "transparent",
          }}
          rel="noopener noreferrer"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon icon-tabler icons-tabler-outline icon-tabler-brand-github"
          >
            <>
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
            </>
          </svg>
          <span class="sr-only">Link to Github Source</span>
          <span class="hidden md:block">View Source</span>
        </a>
      ) : null
    }
    {
      p.data.npmLink ? (
        <a
          title="Link to NPM Package"
          href={p.data.npmLink}
          href-lang="en-us"
          class="flex h-full w-fit animate-expand-vertically items-center gap-2 truncate rounded-2xl px-3 py-2 text-black text-xl transition-all hover:brightness-90"
          target="_blank"
          style={{
            backgroundColor: p.data.color ?? "transparent",
          }}
          rel="noopener noreferrer"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon icon-tabler icons-tabler-outline icon-tabler-package"
          >
            <>
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5" />
              <path d="M12 12l8 -4.5" />
              <path d="M12 12l0 9" />
              <path d="M12 12l-8 -4.5" />
              <path d="M16 5.25l-8 4.5" />
            </>
          </svg>
          <span class="sr-only">Link to NPM</span>
          <span class="hidden md:block">View package</span>
        </a>
      ) : null
    }
  </nav>
</header>
